{% extends 'layout.html' %}
{% from 'macros/blog.html' import render_blog_post %}
{% from 'macros/pagination.html' import render_pagination %}
{% block title %}
  {{ this.title }}
{% endblock %}
{% block body %}
{% if this.pagination is defined %}
  {% set tags = this.children.distinct("tags") %}
  {% set posts = this.pagination.items %}

{% else %}
  {% set tags = this.parent.children.distinct("tags") %}
  {% set posts = this.items %}
{% endif %}
<section class="section">
<div class="columns">
<div class="column is-one-quarter">
  <article class="panel">
    <p class="panel-heading is-primary">
      PyCascades News
    </p>
    <div class="panel-block">
      Tags:
      <div class="tags container is-fluid">
      {% for t in tags -%}
        {% if this.tag is defined and this.tag == t %}
        <a class="tag is-rounded is-primary" href="{{ ('/news/')|url }}">
          {{ t }}
            <span class="delete is-small"></span>
        </a>
        {% else %}
        <a class="tag is-rounded" href="{{ ('/news@tag/' ~ t)|url }}">
          {{ t }}
        </a>
        {% endif %}
      {% endfor %}
      </div>
    </div>
    <p class="panel-block">
      <span class="panel-icon">
        <img src="{{ '/static/rssfeed.webp' | asseturl }}" width="35" alt="rss logo" />
      </span>
      <a>Subscribe</a>
    </p>
    </article>
</div>
  <div class="column">
      {% for child in posts %}
        {{ render_blog_post(child, from_index=true) }}
      {% endfor %}
  </div>
</div>
</section>
{% if this.pagination is defined  %}
  {{ render_pagination(this.pagination) }}
{% endif %}
{% endblock %}
